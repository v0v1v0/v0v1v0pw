<div class="container">

<table style="width: 100%;"><tr>
<td>CrulAdapter</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adapters for Modifying HTTP Requests</h2>

<h3>Description</h3>

<p><code>Adapter</code> is the base parent class used to implement
<span class="pkg">webmockr</span> support for different HTTP clients. It should not be used
directly. Instead, use one of the client-specific adapters that webmockr
currently provides:
</p>

<ul>
<li> <p><code>CrulAdapter</code> for <span class="pkg">crul</span>
</p>
</li>
<li> <p><code>HttrAdapter</code> for <span class="pkg">httr</span>
</p>
</li>
<li> <p><code>Httr2Adapter</code> for <span class="pkg">httr2</span>
</p>
</li>
</ul>
<h3>Details</h3>

<p>Note that the documented fields and methods are the same across all
client-specific adapters.
</p>


<h3>Super class</h3>

<p><code>webmockr::Adapter</code> -&gt; <code>CrulAdapter</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>client</code></dt>
<dd>
<p>HTTP client package name</p>
</dd>
<dt><code>name</code></dt>
<dd>
<p>adapter name</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul><li> <p><a href="#method-CrulAdapter-clone"><code>CrulAdapter$clone()</code></a>
</p>
</li></ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="disable"><a href="../../webmockr/html/Adapter.html#method-Adapter-disable"><code>webmockr::Adapter$disable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="enable"><a href="../../webmockr/html/Adapter.html#method-Adapter-enable"><code>webmockr::Adapter$enable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="handle_request"><a href="../../webmockr/html/Adapter.html#method-Adapter-handle_request"><code>webmockr::Adapter$handle_request()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="initialize"><a href="../../webmockr/html/Adapter.html#method-Adapter-initialize"><code>webmockr::Adapter$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="remove_stubs"><a href="../../webmockr/html/Adapter.html#method-Adapter-remove_stubs"><code>webmockr::Adapter$remove_stubs()</code></a></span></li>
</ul></details><hr>
<a id="method-CrulAdapter-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>CrulAdapter$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Super class</h3>

<p><code>webmockr::Adapter</code> -&gt; <code>HttrAdapter</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>client</code></dt>
<dd>
<p>HTTP client package name</p>
</dd>
<dt><code>name</code></dt>
<dd>
<p>adapter name</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul><li> <p><a href="#method-HttrAdapter-clone"><code>HttrAdapter$clone()</code></a>
</p>
</li></ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="disable"><a href="../../webmockr/html/Adapter.html#method-Adapter-disable"><code>webmockr::Adapter$disable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="enable"><a href="../../webmockr/html/Adapter.html#method-Adapter-enable"><code>webmockr::Adapter$enable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="handle_request"><a href="../../webmockr/html/Adapter.html#method-Adapter-handle_request"><code>webmockr::Adapter$handle_request()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="initialize"><a href="../../webmockr/html/Adapter.html#method-Adapter-initialize"><code>webmockr::Adapter$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="remove_stubs"><a href="../../webmockr/html/Adapter.html#method-Adapter-remove_stubs"><code>webmockr::Adapter$remove_stubs()</code></a></span></li>
</ul></details><hr>
<a id="method-HttrAdapter-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>HttrAdapter$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Super class</h3>

<p><code>webmockr::Adapter</code> -&gt; <code>Httr2Adapter</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>client</code></dt>
<dd>
<p>HTTP client package name</p>
</dd>
<dt><code>name</code></dt>
<dd>
<p>adapter name</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul><li> <p><a href="#method-Httr2Adapter-clone"><code>Httr2Adapter$clone()</code></a>
</p>
</li></ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="disable"><a href="../../webmockr/html/Adapter.html#method-Adapter-disable"><code>webmockr::Adapter$disable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="enable"><a href="../../webmockr/html/Adapter.html#method-Adapter-enable"><code>webmockr::Adapter$enable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="handle_request"><a href="../../webmockr/html/Adapter.html#method-Adapter-handle_request"><code>webmockr::Adapter$handle_request()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="initialize"><a href="../../webmockr/html/Adapter.html#method-Adapter-initialize"><code>webmockr::Adapter$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="webmockr" data-topic="Adapter" data-id="remove_stubs"><a href="../../webmockr/html/Adapter.html#method-Adapter-remove_stubs"><code>webmockr::Adapter$remove_stubs()</code></a></span></li>
</ul></details><hr>
<a id="method-Httr2Adapter-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Httr2Adapter$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>client</code></dt>
<dd>
<p>HTTP client package name</p>
</dd>
<dt><code>name</code></dt>
<dd>
<p>adapter name</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Adapter-new"><code>Adapter$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Adapter-enable"><code>Adapter$enable()</code></a>
</p>
</li>
<li> <p><a href="#method-Adapter-disable"><code>Adapter$disable()</code></a>
</p>
</li>
<li> <p><a href="#method-Adapter-handle_request"><code>Adapter$handle_request()</code></a>
</p>
</li>
<li> <p><a href="#method-Adapter-remove_stubs"><code>Adapter$remove_stubs()</code></a>
</p>
</li>
<li> <p><a href="#method-Adapter-clone"><code>Adapter$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-Adapter-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Create a new Adapter object
</p>


<h5>Usage</h5>

<div class="r"><pre>Adapter$new()</pre></div>


<hr>
<a id="method-Adapter-enable"></a>



<h4>Method <code>enable()</code>
</h4>

<p>Enable the adapter
</p>


<h5>Usage</h5>

<div class="r"><pre>Adapter$enable(quiet = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>quiet</code></dt>
<dd>
<p>(logical) suppress messages? default: <code>FALSE</code></p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>TRUE</code>, invisibly
</p>


<hr>
<a id="method-Adapter-disable"></a>



<h4>Method <code>disable()</code>
</h4>

<p>Disable the adapter
</p>


<h5>Usage</h5>

<div class="r"><pre>Adapter$disable(quiet = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>quiet</code></dt>
<dd>
<p>(logical) suppress messages? default: <code>FALSE</code></p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>FALSE</code>, invisibly
</p>


<hr>
<a id="method-Adapter-handle_request"></a>



<h4>Method <code>handle_request()</code>
</h4>

<p>All logic for handling a request
</p>


<h5>Usage</h5>

<div class="r"><pre>Adapter$handle_request(req)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>req</code></dt>
<dd>
<p>a request</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>various outcomes
</p>


<hr>
<a id="method-Adapter-remove_stubs"></a>



<h4>Method <code>remove_stubs()</code>
</h4>

<p>Remove all stubs
</p>


<h5>Usage</h5>

<div class="r"><pre>Adapter$remove_stubs()</pre></div>



<h5>Returns</h5>

<p>nothing returned; removes all request stubs
</p>


<hr>
<a id="method-Adapter-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Adapter$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
if (requireNamespace("httr", quietly = TRUE)) {
# library(httr)

# normal httr request, works fine
# real &lt;- GET("https://httpbin.org/get")
# real

# with webmockr
# library(webmockr)
## turn on httr mocking
# httr_mock()
## now this request isn't allowed
# GET("https://httpbin.org/get")
## stub the request
# stub_request('get', uri = 'https://httpbin.org/get') %&gt;%
#   wi_th(
#     headers = list('Accept' = 'application/json, text/xml, application/xml, */*')
#   ) %&gt;%
#   to_return(status = 418, body = "I'm a teapot!", headers = list(a = 5))
## now the request succeeds and returns a mocked response
# (res &lt;- GET("https://httpbin.org/get"))
# res$status_code
# rawToChar(res$content)

# allow real requests while webmockr is loaded
# webmockr_allow_net_connect()
# webmockr_net_connect_allowed()
# GET("https://httpbin.org/get?animal=chicken")
# webmockr_disable_net_connect()
# webmockr_net_connect_allowed()
# GET("https://httpbin.org/get?animal=chicken")

# httr_mock(FALSE)
}

## End(Not run)
</code></pre>


</div>