<div class="container">

<table style="width: 100%;"><tr>
<td>find_nearby_stations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find the Nearest Weather Stations to a Given Geographic Point or Known Station</h2>

<h3>Description</h3>

<p>Find nearby weather stations given geographic coordinates or a station code
for both of the <abbr><span class="acronym">DPIRD</span></abbr> and <abbr><span class="acronym">SILO</span></abbr> weather station
networks.  Either a combination of <var>latitude</var> and <var>longitude</var> or
<var>station_code</var> must be provided.  A <abbr><span class="acronym">DPIRD</span></abbr> <abbr><span class="acronym">API</span></abbr> key
is only necessary to search for stations in the <abbr><span class="acronym">DPIRD</span></abbr> network.
If you are not interested in <abbr><span class="acronym">DPIRD</span></abbr> stations in Western Australia,
you may use this function to query only <abbr><span class="acronym">SILO</span></abbr> stations for all of
Australia without using a key.
</p>


<h3>Usage</h3>

<pre><code class="language-R">find_nearby_stations(
  longitude = NULL,
  latitude = NULL,
  station_code = NULL,
  distance_km = 100,
  api_key = NULL,
  which_api = "silo",
  include_closed = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>longitude</code></td>
<td>
<p>A <code>numeric</code> value of longitude in decimal degree (DD)
format.  Optional and defaults to <code>NULL</code>.  Required if <code>station_code</code> is
not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latitude</code></td>
<td>
<p>A <code>numeric</code> value of latitude in decimal degree (DD)
format.  Optional and defaults to <code>NULL</code>.  Required if <code>station_code</code> is
not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>station_code</code></td>
<td>
<p>A <code>string</code> with the station code for the station of
interest.  Optional and defaults to <code>NULL</code>.  Required if <code>longitude</code> and
<code>latitude</code> are not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance_km</code></td>
<td>
<p>A <code>numeric</code> value for distance to limit the search from
the station or location of interest.  Defaults to 100 km.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_key</code></td>
<td>
<p>A <code>character</code> string containing your <abbr><span class="acronym">API</span></abbr> key from
<abbr><span class="acronym">DPIRD</span></abbr>, <a href="https://www.agric.wa.gov.au/web-apis">https://www.agric.wa.gov.au/web-apis</a>, for the
<abbr><span class="acronym">DPIRD</span></abbr> Weather 2.0 <abbr><span class="acronym">API</span></abbr>.  If left as <code>NULL</code>, defaults to
automatically detecting your key from your local .Renviron, .Rprofile or
similar.  Alternatively, you may directly provide your key as a string
here.  If nothing is provided, you will be prompted on how to set up your
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session so that it is auto-detected.  Only used  when <var>which_api</var> is
<code>DPIRD</code> or <code>all</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which_api</code></td>
<td>
<p>A <code>string</code> value that indicates which <abbr><span class="acronym">API</span></abbr> to use.
Defaults to <code>silo</code> only.  Valid values are <code>all</code>, for both <abbr><span class="acronym">SILO</span></abbr>
(<abbr><span class="acronym">BOM</span></abbr>) and <abbr><span class="acronym">DPIRD</span></abbr> weather station networks; <code>silo</code> for
only stations in the <abbr><span class="acronym">SILO</span></abbr> network; or <code>dpird</code> for stations in the
<abbr><span class="acronym">DPIRD</span></abbr> network.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_closed</code></td>
<td>
<p>A <code>Boolean</code> value that indicates whether closed
stations in the <abbr><span class="acronym">DPIRD</span></abbr> network should be included in the results.
Defaults to <code>FALSE</code> with closed stations not included.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>data.table::data.table()</code> with <code>station_code</code>, <code>station_name</code>,
<code>latitude</code>, <code>longitude</code>, <code>elev_m</code>, <code>state</code>, <code>owner</code>, and <code>distance</code>.
Data are sorted by increasing distance from station or location of
interest.
</p>


<h3>Note</h3>

<p>You can request your own <abbr><span class="acronym">API</span></abbr> key from <abbr><span class="acronym">DPIRD</span></abbr> for
free by filling out the form found at
<a href="https://www.agric.wa.gov.au/web-apis">https://www.agric.wa.gov.au/web-apis</a>.
</p>


<h3>Author(s)</h3>

<p>Rodrigo Pires, <a href="mailto:rodrigo.pires@dpird.wa.gov.au">rodrigo.pires@dpird.wa.gov.au</a>, and Adam H.
Sparks, <a href="mailto:adamhsparks@gmail.com">adamhsparks@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Other DPIRD: 
<code>dpird_extreme_weather_values</code>,
<code>dpird_minute_values</code>,
<code>dpird_summary_values</code>,
<code>find_stations_in()</code>,
<code>get_dpird_apsim()</code>,
<code>get_dpird_availability()</code>,
<code>get_dpird_extremes()</code>,
<code>get_dpird_minute()</code>,
<code>get_dpird_summaries()</code>,
<code>get_stations_metadata()</code>
</p>
<p>Other SILO: 
<code>find_stations_in()</code>,
<code>get_data_drill()</code>,
<code>get_data_drill_apsim()</code>,
<code>get_patched_point()</code>,
<code>get_patched_point_apsim()</code>,
<code>get_stations_metadata()</code>,
<code>silo_daily_values</code>
</p>
<p>Other metadata: 
<code>find_forecast_towns()</code>,
<code>find_stations_in()</code>,
<code>get_available_imagery()</code>,
<code>get_available_radar()</code>,
<code>get_dpird_availability()</code>,
<code>get_stations_metadata()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# Note that queries to the DPIRD API require you to have your own API key.

# Query WA only stations and return DPIRD's stations nearest to the
# Northam, WA station, "NO", returning stations with 50 km of this station

wa_stn &lt;- find_nearby_stations(
  station_code = "NO",
  distance_km = 50,
  api_key = "your_api_key",
  which_api = "dpird"
)

# Query stations nearest DPIRD's Northam, WA station, "NO" and return both
# DPIRD and SILO/BOM stations within 50 km of this station.

wa_stn &lt;- find_nearby_stations(
  station_code = "NO",
  distance_km = 50,
  api_key = "your_api_key",
  which_api = "all"
)

# Query Wagga Wagga BOM station finding stations within 200 km of it, note
# that it is not necessary to provide an `api_key` for SILO queries of
# nearby stations.

wagga_stn &lt;- find_nearby_stations(
  latitude = -35.1583,
  longitude = 147.4575,
  distance_km = 200,
  which_api = "silo"
)

## End(Not run)

</code></pre>


</div>