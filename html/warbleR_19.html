<div class="container">

<table style="width: 100%;"><tr>
<td>filter_sels</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Subset selection data frames based on manually filtered image files</h2>

<h3>Description</h3>

<p><code>filter_sels</code> subsets selection data frames based on image files that have been manually filtered.
</p>


<h3>Usage</h3>

<pre><code class="language-R">filter_sels(
  X,
  path = NULL,
  lspec = FALSE,
  img.suffix = NULL,
  it = "jpeg",
  incl.wav = TRUE,
  missing = FALSE,
  index = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>object of class 'selection_table', 'extended_selection_table' or data frame with the following columns: 1) "sound.files": name of the .wav
files, 2) "sel": number of the selections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Character string containing the directory path where the image files are located.
If <code>NULL</code> (default) then the current working directory is used.
<code>warbleR_options</code> 'wav.path' argument does not apply.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lspec</code></td>
<td>
<p>A logical argument indicating if the image files to be use for filtering were produced by the function <code>full_spectrograms</code>.
All the image files that correspond to a sound file must be deleted in order to be
filtered out.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>img.suffix</code></td>
<td>
<p>A character vector of length 1 with the suffix (label) at the end
of the names of the image files. Default is <code>NULL</code> (i.e. no suffix as in the images
produced by <code>spectrograms</code>). Ignored if <code>lspec = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>it</code></td>
<td>
<p>A character vector of length 1 giving the image type ("tiff", "jpeg" or "pdf") Default is "jpeg". Note that pdf files can only be generated by <code>full_spectrogram2pdf</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incl.wav</code></td>
<td>
<p>Logical. To indicate if sound files extensions are included ( <code>TRUE</code>, default) or not in the image
file names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing</code></td>
<td>
<p>Logical. Controls whether the output data frame (or row index if is <code>index = TRUE</code>)
contains the selections with images in the working directory (Default, <code>missing = FALSE</code>)
or the ones with no image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>Logical. If <code>TRUE</code> and <code>missing = FALSE</code> the row index for the selections with images in the working directory is returned. If <code>missing = TRUE</code>) then the row index of the ones with no image is returned instead. Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function subsets selections (or sound files if <code>lspec</code> is <code>TRUE</code>) listed in a data frame
based on the image files from spectrogram-creating functions (e.g. <code>spectrograms</code>) in the
working directory. Only the selections/sound files with and image in the working directory will remain.
This is useful for excluding selections from undesired signals. Note that the
image files should be in the working directory (or the directory provided in 'path').
</p>


<h3>Value</h3>

<p>If all sound files are ok, returns message "All files are ok!".
Otherwise returns "These file(s) cannot be read" message with names of the
corrupted sound files.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas, M., &amp; Smith-Vidaurre, G. (2017). warbleR: An R package to streamline analysis of animal acoustic signals. Methods in Ecology and Evolution, 8(2), 184-191.

</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# save wav file examples
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "lbh_selec_table"))
writeWave(Phae.long1, file.path(tempdir(), "Phae.long1.wav"))
writeWave(Phae.long2, file.path(tempdir(), "Phae.long2.wav"))
writeWave(Phae.long3, file.path(tempdir(), "Phae.long3.wav"))

spectrograms(lbh_selec_table,
  flim = c(0, 11), inner.mar = c(4, 4.5, 2, 1), outer.mar = c(4, 2, 2, 1),
  picsize = 2, res = 300, cexlab = 2, mar = 0.05, wl = 300, path = tempdir()
)

# go to the working directory (tempdir()) and delete some images

# filter selection data frame
fmloc &lt;- filter_sels(X = lbh_selec_table, path = tempdir())

# this data frame does not have the selections corresponding to the images that were deleted
fmloc

# now using lspec images
full_spectrograms(
  sxrow = 2, rows = 8, pal = reverse.heat.colors, wl = 300, ovlp = 10,
  path = tempdir()
)

# go to the working directory (tempdir()) and delete lspec
# images (the ones with several rows of spectrograms)

# filter selection data frame
fmloc2 &lt;- filter_sels(
  X = lbh_selec_table, lspec = TRUE,
  path = tempdir()
)

## End(Not run)

</code></pre>


</div>