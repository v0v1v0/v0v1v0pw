<div class="container">

<table style="width: 100%;"><tr>
<td>wtd.cor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Produces weighted correlations with standard errors and significance.  For a faster version without standard errors and p values, use the <code>wtd.cors</code> function.
</h2>

<h3>Description</h3>

<p><code>wtd.cor</code> produces a Pearsons correlation coefficient comparing two variables or matrices.  Note that weights run with the default parameters here treat the weights as an estimate of the precision of the information.  For survey data, users should run this code with bootstrapped standard errors <code>bootse=TRUE</code>, which are robust to heteroskadesticity, although these will vary slightly each time the weights are run. A prior version of this software was set to default to <code>mean1=FALSE</code> and <code>bootse=FALSE</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">wtd.cor(x, y=NULL, weight=NULL, mean1=TRUE, collapse=TRUE, bootse=FALSE,
bootp=FALSE, bootn=1000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p><code>x</code> should be a matrix or vector which the researcher wishes to correlate with <code>y</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p><code>y</code> should be a numerical vector or matrix which the researcher wishes to correlate with <code>x</code>.  If <code>y</code> is NULL, <code>x</code> will be used instead
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>

<p><code>weight</code> is an optional vector of weights to be used to determining the weighted mean and variance for calculation of the correlations.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean1</code></td>
<td>

<p><code>mean1</code> is an optional parameter for determining whether the weights should be forced to have an average value of 1. If this is set as false, the weighted correlations will be produced with the assumption that the true N of the data is equivalent to the sum of the weights.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>

<p><code>collapse</code> is an indicator for whether the data should be collapsed to a simpler form if either x or y is a vector instead of a matrix.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootse</code></td>
<td>

<p><code>bootse</code> is an optional parameter that produces bootstrapped standard errors. This should be used to address heteroskadesticity issues when weights indicate probabilities of selection rather than the precision of estimates.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootp</code></td>
<td>

<p><code>bootp</code> is an optional parameter that produces bootstrapped p values instead of estimating p values from the standard errors. This parameter only operates when <code>bootse=TRUE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootn</code></td>
<td>

<p><code>bootn</code> is an optional parameter that is used to indicate the number of bootstraps that should be run for <code>bootse</code> and <code>bootp</code>.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with matrices for the estimated correlation coefficient, the standard error on that correlation coefficient, the t-value for that correlation coefficient, and the p value for the significance of the correlation.  If the list can be simplified, simplification will be done.
</p>


<h3>Author(s)</h3>

<p>Josh Pasek, Assistant Professor of Communication Studies at the University of Michigan (www.joshpasek.com).
</p>


<h3>See Also</h3>

<p><code>wtd.cors</code>
<code>stdz</code>
<code>wtd.t.test</code>
<code>wtd.chi.sq</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">test &lt;- c(1,1,1,1,1,1,2,2,2,3,3,3,4,4)
t2 &lt;- rev(test)
weight &lt;- c(.5,.5,.5,.5,.5,1,1,1,1,2,2,2,2,2)

wtd.cor(test, t2)
wtd.cor(test, t2, weight)
wtd.cor(test, t2, weight, bootse=TRUE)
</code></pre>


</div>