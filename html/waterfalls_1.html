<div class="container">

<table style="width: 100%;"><tr>
<td>waterfall</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create waterfall charts</h2>

<h3>Description</h3>

<p>Create waterfall charts
</p>


<h3>Usage</h3>

<pre><code class="language-R">waterfall(
  .data = NULL,
  values,
  labels,
  rect_text_labels = values,
  rect_text_size = 1,
  rect_text_labels_anchor = "centre",
  put_rect_text_outside_when_value_below = 0.05 * (max(cumsum(values)) -
    min(cumsum(values))),
  calc_total = FALSE,
  total_axis_text = "Total",
  total_rect_text = sum(values),
  total_rect_color = "black",
  total_rect_border_color = "black",
  total_rect_text_color = "white",
  fill_colours = NULL,
  fill_by_sign = TRUE,
  rect_width = 0.7,
  rect_border = "black",
  draw_lines = TRUE,
  lines_anchors = c("right", "left"),
  linetype = "dashed",
  draw_axis.x = "behind",
  theme_text_family = "",
  scale_y_to_waterfall = TRUE,
  print_plot = FALSE,
  ggplot_object_name = "mywaterfall"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>a <code>data.frame</code> containing two columns, one with the values, the other with the labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>a numeric vector making up the heights of the rectangles in the waterfall</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>the labels corresponding to each vector, marked on the x-axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rect_text_labels</code></td>
<td>
<p>(character) a character vector of the same length as values that are placed on the rectangles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rect_text_size</code></td>
<td>
<p>size of the text in the rectangles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rect_text_labels_anchor</code></td>
<td>
<p>(character) How should <code>rect_text_labels</code> be positioned? In future releases, we might have support for north or south anchors, or for directed positioning (negative down, positive up) etc. For now, only centre is supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>put_rect_text_outside_when_value_below</code></td>
<td>
<p>(numeric) the text labels accompanying a rectangle of this height will be placed outside the box: below if it's negative; above if it's positive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calc_total</code></td>
<td>
<p>(logical, default: <code>FALSE</code>) should the final pool of the waterfall be calculated (and placed on the chart)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_axis_text</code></td>
<td>
<p>(character) the text appearing on the axis underneath the total rectangle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_rect_text</code></td>
<td>
<p>(character) the text in the middle of the rectangle of the total rectangle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_rect_color</code></td>
<td>
<p>the color of the final rectangle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_rect_border_color</code></td>
<td>
<p>the border color of the total rectangle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_rect_text_color</code></td>
<td>
<p>the color of the final rectangle's label text</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_colours</code></td>
<td>
<p>Colours to be used to fill the rectangles, in order. Disregarded if <code>fill_by_sign</code> is <code>TRUE</code> (the default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_by_sign</code></td>
<td>
<p>(logical, default: <code>TRUE</code>) should positive and negative values each have the same colour?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rect_width</code></td>
<td>
<p>(numeric) the width of the rectangle, relative to the space between each label factor</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rect_border</code></td>
<td>
<p>the border colour around the rectangles. Provide either a single color, that will be used for each rectangle, or one color for each rectangle. Choose <code>NA</code> if no border is desired.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw_lines</code></td>
<td>
<p>(logical, default: <code>TRUE</code>) should lines be drawn between successive rectangles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lines_anchors</code></td>
<td>
<p>a character vector of length two specifying the horizontal placement of the drawn lines relative to the preceding and successive rectangles, respectively</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linetype</code></td>
<td>
<p>the linetype for the draw_lines</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw_axis.x</code></td>
<td>
<p>(character) one of "none", "behind", "front" whether to draw an x.axis line and whether to draw it behind or in front of the rectangles, default is behind</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theme_text_family</code></td>
<td>
<p>(character) Passed to the <code>text</code> argument in <code>ggplot2::theme</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_y_to_waterfall</code></td>
<td>
<p>(logical, default: <code>TRUE</code>) Should the default range of the y-axis be from the bottom of the lowest pool to the top of the highest? If <code>FALSE</code>, which was the only option before version 0.1.2, the range of the plot is more balanced around the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print_plot</code></td>
<td>
<p>(logical) Whether or not the plot should be printed. By default, <code>TRUE</code>, which means it cannot be assigned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ggplot_object_name</code></td>
<td>
<p>(character) A quoted valid object name to which ggplot layers may be added after the function has run. Ignored if <code>print</code> is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Based on <code>grattan_waterfall</code> from the 'grattanCharts' package (<a href="https://github.com/HughParsonage/grattanCharts">https://github.com/HughParsonage/grattanCharts</a>).
</p>


<h3>Examples</h3>

<pre><code class="language-R">waterfall(values = round(rnorm(5), 1), labels = letters[1:5], calc_total = TRUE)
waterfall(.data = data.frame(category = letters[1:5],
                             value = c(100, -20, 10, 20, 110)), 
          fill_colours = colorRampPalette(c("#1b7cd6", "#d5e6f2"))(5),
          fill_by_sign = FALSE)
</code></pre>


</div>