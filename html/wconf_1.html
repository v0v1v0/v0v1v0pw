<div class="container">

<table style="width: 100%;"><tr>
<td>wconf-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>wconf: Weighted Confusion Matrix</h2>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style="float: right" alt="logo" width="120"></p>
<p>Allows users to create weighted confusion matrices and accuracy metrics that help with the model selection process for classification problems, where distance from the correct category is important. The package includes several weighting schemes which can be parameterized, as well as custom configuration options. Furthermore, users can decide whether they wish to positively or negatively affect the accuracy score as a result of applying weights to the confusion matrix. Functions are included to calculate accuracy metrics for imbalanced data. Finally, 'wconf' integrates well with the 'caret' package, but it can also work standalone when provided data in matrix form. References: Kuhn, M. (2008) "Building Perspective Models in R Using the caret Package" <a href="https://doi.org/10.18637/jss.v028.i05">doi:10.18637/jss.v028.i05</a> Monahov, A. (2021) "Model Evaluation with Weighted Threshold Optimization (and the mewto R package)" <a href="https://doi.org/10.2139/ssrn.3805911">doi:10.2139/ssrn.3805911</a> Monahov, A. (2024) "Improved Accuracy Metrics for Classification with Imbalanced Data and Where Distance from the Truth Matters, with the wconf R Package" <a href="https://doi.org/10.2139/ssrn.4802336">doi:10.2139/ssrn.4802336</a> Starovoitov, V., Golub, Y. (2020). New Function for Estimating Imbalanced Data Classification Results. Pattern Recognition and Image Analysis, 295–302 Van de Velden, M., Iodice D'Enza, A., Markos, A., Cavicchia, C. (2023) "A general framework for implementing distances for categorical variables" <a href="https://doi.org/10.48550/arXiv.2301.02190">doi:10.48550/arXiv.2301.02190</a>.
</p>


<h3>Details</h3>

<p>weightmatrix - configures and visualizes a weight matrix
</p>
<p>wconfusionmatrix - calculates the weighted confusion matrix from a caret
ConfusionMatrix object or a simple matrix, according to one of several
weighting schemas and optionally prints the weighted accuracy score.
</p>
<p>rconfusionmatrix - calculates the redistributed confusion matrix by
reallocating observations classified in the vicinity of the true category
to the confusion matrix diagonal, according to a user-specified weighting
scheme which determines the proportion of observations to reassign.
</p>
<p>balancedaccuracy - calculates classification accuracy scores for imbalanced
data using sine-based formulas proposed by Starovoitov and Golub (2020).
</p>


<h3>Author(s)</h3>

<p>Alexandru Monahov
</p>


<h3>Source</h3>

<p>Copyright Alexandru Monahov, 2024. You may use, modify and redistribute
this code, provided that you give credit to the author and make any derivative
work available to the public for free.
</p>


<h3>References</h3>

<p>Kuhn, M. (2008). Building Perspective Models in R Using the caret
Package. Journal of Statistical Software, 28(5), 1-26.
</p>
<p>Monahov, A. (2021). Model Evaluation with Weighted Threshold Optimization
(and the "mewto" R package), Machine Learning eJournal, SSRN.
</p>
<p>Monahov, A. (2024). Improved Accuracy Metrics for Classification with
Imbalanced Data and Where Distance from the Truth Matters, with the
Wconf R Package, Computing Methodology eJournal, SSRN.
</p>
<p>Starovoitov, V., Golub, Y. (2020). New Function for Estimating Imbalanced
Data Classification Results. Pattern Recognition and Image Analysis, 295–302.
</p>
<p>Van de Velden, M. et al. (2023). A general framework for implementing
distances for categorical variables. arXiv.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul><li> <p><a href="https://www.alexandrumonahov.eu.org/projects">https://www.alexandrumonahov.eu.org/projects</a>
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R"># Generate sample data
m = matrix(c(70,0,0,10,10,0,5,3,2), ncol = 3, nrow=3)
# Experiment with several weighting schemes to find optimal solution
weightmatrix(n=4, weight.type="arithmetic", plot.weights = TRUE)
weightmatrix(n=4, weight.type="geometric", geometric.multiplier = 0.6)
weightmatrix(n=4, weight.type="geometric", geometric.multiplier = 2)
# Compute the weighted confusion matrix
wconfusionmatrix(m, weight.type = "arithmetic", print.weighted.accuracy = TRUE)
# Compute the redistributed confusion matrix
rconfusionmatrix(m, custom.weights = c(0,0.5,0.1), print.weighted.accuracy = TRUE)
# Calculate accuracy metrics for imbalanced data
balancedaccuracy(m, print.scores = TRUE)

</code></pre>


</div>